Project Name,Package Name,Type Name,Method Name,Implementation Smell,Cause of the Smell,Method start line no
ontrack,net.nemerosa.ontrack.test,TestUtils,getEnv,Long Statement,The length of the statement "throw new IllegalStateException(String.format("The %s value must be defined with the system property `%s` or the environment variable `%s`."`name`systemProperty`envProperty));" is 175.,42
ontrack,net.nemerosa.ontrack.test,TestUtils,assertJsonWrite,Long Statement,The length of the statement "assertEquals(mapper.writeValueAsString(expectedJson)`mapper.writerWithView(viewClass).writeValueAsString(objectToWrite));" is 121.,65
ontrack,net.nemerosa.ontrack.test,TestUtils,dateTime,Magic Number,The method contains a magic number: 2014,86
ontrack,net.nemerosa.ontrack.test,TestUtils,dateTime,Magic Number,The method contains a magic number: 5,86
ontrack,net.nemerosa.ontrack.test,TestUtils,dateTime,Magic Number,The method contains a magic number: 13,86
ontrack,net.nemerosa.ontrack.test,TestUtils,dateTime,Magic Number,The method contains a magic number: 20,86
ontrack,net.nemerosa.ontrack.test,TestUtils,dateTime,Magic Number,The method contains a magic number: 11,86
ontrack,net.nemerosa.ontrack.boot.ui,StructureAPIController,getProjectList,Long Statement,The length of the statement "return ResourceCollection.of(structureService.getProjectList().stream().map(this::toProjectResource)`uri(on(StructureAPIController.class).getProjectList())).with(Link.CREATE`uri(on(StructureAPIController.class).newProject(null)));" is 230.,28
ontrack,net.nemerosa.ontrack.boot.ui,StructureAPIController,getBranchListForProject,Long Statement,The length of the statement "return ResourceCollection.of(structureService.getBranchesForProject(projectId).stream().map(this::toBranchResource)`uri(on(StructureAPIController.class).getBranchListForProject(projectId))).with(Link.CREATE`uri(on(StructureAPIController.class).newBranch(projectId`null)));" is 272.,85
ontrack,net.nemerosa.ontrack.boot.ui,StructureAPIController,toProjectResourceWithActions,Long Statement,The length of the statement "return toProjectResource(project).with(Link.UPDATE`uri(on(StructureAPIController.class).saveProject(project.getId()`null))).with("branches"`uri(on(StructureAPIController.class).getBranchListForProject(project.getId())));" is 220.,155
ontrack,net.nemerosa.ontrack.boot.ui,StructureAPITest,createBranch,Long Statement,The length of the statement "Resource<Branch> resource=asUser().with(project.getData().id()`ProjectEdit.class).call(() -> structure.newBranch(project.getData().getId()`nameDescription));" is 157.,57
ontrack,net.nemerosa.ontrack.boot.support,ViewAwareMappingJackson2HttpMessageConverter,writeInternal,Long Statement,The length of the statement "@SuppressWarnings("deprecation") JsonGenerator jsonGenerator=getObjectMapper().getJsonFactory().createJsonGenerator(outputMessage.getBody()`encoding);" is 150.,36
ontrack,net.nemerosa.ontrack.boot.support,JsonViewClassTest,view_class_resource_collection_empty,Long Statement,The length of the statement "assertEquals(ResourceCollection.class`getViewClass(ResourceCollection.of(Collections.emptyList()`URI.create("urn:projects"))));" is 127.,47
ontrack,net.nemerosa.ontrack.boot.support,JsonViewClassTest,view_class_resource_collection,Long Statement,The length of the statement "assertEquals(ResourceCollection.class`getViewClass(ResourceCollection.of(Arrays.asList(Resource.of(project()`URI.create("urn:project")))`URI.create("urn:projects"))));" is 167.,55
ontrack,net.nemerosa.ontrack.ui.resource,ResourceTest,resource_to_json,Long Statement,The length of the statement "Resource<Dummy> resource=Resource.of(info`URI.create("http://host/dummy")).with("connectors"`URI.create("http://host/dummy/test"));" is 131.,17
ontrack,net.nemerosa.ontrack.ui.resource,ResourceTest,resource_to_json,Long Statement,The length of the statement "TestUtils.assertJsonEquals(object().with("version"`"1.0.0").with("href"`"http://host/dummy").with("connectors"`object().with("href"`"http://host/dummy/test").end()).end()`node);" is 177.,17
ontrack,net.nemerosa.ontrack.ui.resource,ResourceCollectionTest,to_json,Long Statement,The length of the statement "ResourceCollection<Dummy> collection=ResourceCollection.of(Arrays.asList(Resource.of(new Dummy("1")`URI.create("http://host/dummy/1"))`Resource.of(new Dummy("2")`URI.create("http://host/dummy/2")))`URI.create("http://host/dummy"));" is 231.,22
ontrack,net.nemerosa.ontrack.ui.resource,ResourceCollectionTest,to_json,Long Statement,The length of the statement "TestUtils.assertJsonEquals(object().with("href"`"http://host/dummy").with("resources"`array().with(object().with("version"`"1").with("href"`"http://host/dummy/1").end()).with(object().with("version"`"2").with("href"`"http://host/dummy/2").end()).end()).end()`ObjectMapperFactory.create().valueToTree(collection));" is 313.,22
ontrack,net.nemerosa.ontrack.ui.resource,ResourceCollectionTest,resource_collection_with_filtering,Long Statement,The length of the statement "List<Branch> branches=Arrays.asList(Branch.of(project`new NameDescription("B1"`"Branch 1"))`Branch.of(project`new NameDescription("B2"`"Branch 2")));" is 149.,49
ontrack,net.nemerosa.ontrack.ui.resource,ResourceCollectionTest,resource_collection_with_filtering,Long Statement,The length of the statement "ResourceCollection<Branch> resourceCollection=ResourceCollection.of(branches.stream().map(b -> Resource.of(b`URI.create("urn:branch:" + b.getName()))).collect(Collectors.toList())`URI.create("urn:branch"));" is 206.,49
ontrack,net.nemerosa.ontrack.ui.resource,ResourceCollectionTest,resource_collection_with_filtering,Long Statement,The length of the statement "assertJsonWrite(object().with("href"`"urn:branch").with("resources"`array().with(object().with("id"`0).with("name"`"B1").with("description"`"Branch 1").with("href"`"urn:branch:B1").end()).with(object().with("id"`0).with("name"`"B2").with("description"`"Branch 2").with("href"`"urn:branch:B2").end()).end()).end()`resourceCollection`ResourceCollection.class);" is 358.,49
ontrack,net.nemerosa.ontrack.ui.controller,MockURIBuilder,build,Long Statement,The length of the statement "return URI.create(format("urn:test:%s#%s:%s"`info.getControllerMethod().getDeclaringClass().getName()`info.getControllerMethod().getName()`StringUtils.join(info.getArgumentValues()`"`")));" is 188.,16
ontrack,net.nemerosa.ontrack.ui.support,StringToID,convert,Magic Number,The method contains a magic number: 10,8
ontrack,net.nemerosa.ontrack.service.security,SecurityServiceImpl,getCurrentAccount,Complex Conditional,The conditional expression authentication != null && authentication.isAuthenticated() && (authentication.getDetails() instanceof Account) is complex.,48
ontrack,net.nemerosa.ontrack.repository,StructureJdbcRepository,newProject,Long Statement,The length of the statement "int id=dbCreate("INSERT INTO PROJECTS(NAME` DESCRIPTION) VALUES (:name` :description)"`params("name"`project.getName()).addValue("description"`project.getDescription()));" is 170.,24
ontrack,net.nemerosa.ontrack.repository,StructureJdbcRepository,getProject,Long Statement,The length of the statement "return getNamedParameterJdbcTemplate().queryForObject("SELECT * FROM PROJECTS WHERE ID = :id"`params("id"`projectId.getValue())`(rs`rowNum) -> toProject(rs));" is 158.,47
ontrack,net.nemerosa.ontrack.repository,StructureJdbcRepository,saveProject,Long Statement,The length of the statement "getNamedParameterJdbcTemplate().update("UPDATE PROJECTS SET NAME = :name` DESCRIPTION = :description WHERE ID = :id"`params("name"`project.getName()).addValue("description"`project.getDescription()).addValue("id"`project.getId().getValue()));" is 242.,60
ontrack,net.nemerosa.ontrack.repository,StructureJdbcRepository,getBranch,Long Statement,The length of the statement "return getNamedParameterJdbcTemplate().queryForObject("SELECT * FROM BRANCHES WHERE ID = :id"`params("id"`branchId.getValue())`(rs`rowNum) -> toBranch(rs`this::getProject));" is 173.,70
ontrack,net.nemerosa.ontrack.repository,StructureJdbcRepository,getBranchesForProject,Long Statement,The length of the statement "return getNamedParameterJdbcTemplate().query("SELECT * FROM BRANCHES WHERE PROJECTID = :projectId ORDER BY NAME"`params("projectId"`projectId.getValue())`(rs`rowNum) -> toBranch(rs`id -> project));" is 197.,83
ontrack,net.nemerosa.ontrack.repository,StructureJdbcRepository,newBranch,Long Statement,The length of the statement "int id=dbCreate("INSERT INTO BRANCHES(PROJECTID` NAME` DESCRIPTION) VALUES (:projectId` :name` :description)"`params("name"`branch.getName()).addValue("description"`branch.getDescription()).addValue("projectId"`branch.getProject().id()));" is 238.,93
ontrack,net.nemerosa.ontrack.repository,StructureJdbcRepository,newBuild,Long Statement,The length of the statement "int id=dbCreate("INSERT INTO BUILDS(BRANCHID` NAME` DESCRIPTION` CREATION` CREATOR) VALUES (:branchId` :name` :description` :creation` :creator)"`params("name"`build.getName()).addValue("description"`build.getDescription()).addValue("branchId"`build.getBranch().id()).addValue("creation"`dateTimeForDB(build.getSignature().getTime())).addValue("creator"`build.getSignature().getUser().getName()));" is 397.,110
ontrack,net.nemerosa.ontrack.repository,StructureJdbcRepository,saveBuild,Long Statement,The length of the statement "getNamedParameterJdbcTemplate().update("UPDATE BUILDS SET NAME = :name` DESCRIPTION = :description WHERE ID = :id"`params("name"`build.getName()).addValue("description"`build.getDescription()).addValue("id"`build.id()));" is 220.,128
ontrack,net.nemerosa.ontrack.repository,StructureJdbcRepository,toBranch,Long Statement,The length of the statement "return Branch.of(projectSupplier.apply(id(rs`"projectId"))`new NameDescription(rs.getString("name")`rs.getString("description"))).withId(id(rs));" is 145.,144
ontrack,net.nemerosa.ontrack.repository,StructureJdbcRepositoryTest,create_branch_branch_defined,Magic Number,The method contains a magic number: 11,26
ontrack,net.nemerosa.ontrack.it,ITConfig,dataSource,Magic Number,The method contains a magic number: 2,22
ontrack,net.nemerosa.ontrack.model.structure,Build,of,Long Statement,The length of the statement "return new Build(ID.NONE`nameDescription.getName()`nameDescription.getDescription()`signature`branch`Collections.<PromotionRun>emptyList()`Collections.<ValidationRun>emptyList());" is 179.,24
ontrack,net.nemerosa.ontrack.model.structure,ProjectTest,new_form,Long Statement,The length of the statement "assertJsonWrite(object().with("fields"`array().with(object().with("type"`"text").with("name"`"name").with("label"`"Name").with("required"`true).with("validation"`"Name is required and must contain only alpha-numeric characters` underscores` points or dashes.").with("value"`(String)null).with("length"`40).with("regex"`"[A-Za-z0-9_\\.\\-]+").end()).with(object().with("type"`"memo").with("name"`"description").with("label"`"Description").with("required"`false).with("validation"`(String)null).with("value"`(String)null).with("length"`500).with("rows"`3).end()).end()).end()`Project.form());" is 590.,23
ontrack,net.nemerosa.ontrack.model.structure,ProjectTest,new_form,Magic Number,The method contains a magic number: 40,23
ontrack,net.nemerosa.ontrack.model.structure,ProjectTest,new_form,Magic Number,The method contains a magic number: 500,23
ontrack,net.nemerosa.ontrack.model.structure,ProjectTest,new_form,Magic Number,The method contains a magic number: 3,23
ontrack,net.nemerosa.ontrack.model.structure,ProjectTest,save_form,Long Statement,The length of the statement "assertJsonWrite(object().with("fields"`array().with(object().with("type"`"text").with("name"`"name").with("label"`"Name").with("required"`true).with("validation"`"Name is required and must contain only alpha-numeric characters` underscores` points or dashes.").with("value"`"Name").with("length"`40).with("regex"`"[A-Za-z0-9_\\.\\-]+").end()).with(object().with("type"`"memo").with("name"`"description").with("label"`"Description").with("required"`false).with("validation"`(String)null).with("value"`"Description").with("length"`500).with("rows"`3).end()).end()).end()`Project.of(new NameDescription("Name"`"Description")).asForm());" is 633.,54
ontrack,net.nemerosa.ontrack.model.structure,ProjectTest,save_form,Magic Number,The method contains a magic number: 40,54
ontrack,net.nemerosa.ontrack.model.structure,ProjectTest,save_form,Magic Number,The method contains a magic number: 500,54
ontrack,net.nemerosa.ontrack.model.structure,ProjectTest,save_form,Magic Number,The method contains a magic number: 3,54
ontrack,net.nemerosa.ontrack.model.structure,PromotionViewTest,no_build_json,Long Statement,The length of the statement "PromotionView view=new PromotionView(new PromotionLevel(ID.NONE`"PL"`"Promotion level"`new Branch(ID.NONE`"B"`"Branch"`new Project(ID.NONE`"P"`"Project")))`null`null);" is 167.,11
ontrack,net.nemerosa.ontrack.model.structure,PromotionViewTest,no_build_json,Long Statement,The length of the statement "assertJsonWrite(object().with("promotionLevel"`object().with("id"`0).with("name"`"PL").with("description"`"Promotion level").with("branch"`object().with("id"`0).with("name"`"B").with("description"`"Branch").with("project"`object().with("id"`0).with("name"`"P").with("description"`"Project").end()).end()).end()).with("promotedBuild"`(String)null).with("promotionRun"`(String)null).end()`view`PromotionView.class);" is 413.,11
ontrack,net.nemerosa.ontrack.model.structure,PromotionViewTest,build_json,Long Statement,The length of the statement "PromotionView view=new PromotionView(promotionLevel`Build.of(branch`new NameDescription("11"`"Build 11")`Signature.of(dateTime()`"User"))`new PromotionRun("Promotion"`new Signature(dateTime()`new User("user"))`promotionLevel));" is 227.,46
ontrack,net.nemerosa.ontrack.model.structure,PromotionViewTest,build_json,Long Statement,The length of the statement "assertJsonWrite(object().with("promotionLevel"`object().with("id"`0).with("name"`"PL").with("description"`"Promotion level").with("branch"`object().with("id"`0).with("name"`"B").with("description"`"Branch").with("project"`object().with("id"`0).with("name"`"P").with("description"`"Project").end()).end()).end()).with("promotedBuild"`object().with("id"`0).with("name"`"11").with("description"`"Build 11").with("signature"`object().with("time"`dateTimeJson()).with("user"`object().with("name"`"User").end()).end()).end()).with("promotionRun"`object().with("description"`"Promotion").with("signature"`object().with("time"`dateTimeJson()).with("user"`object().with("name"`"user").end()).end()).end()).end()`view`PromotionView.class);" is 729.,46
ontrack,net.nemerosa.ontrack.model.structure,IDTest,set_to_json,Magic Number,The method contains a magic number: 12,40
ontrack,net.nemerosa.ontrack.model.structure,IDTest,set_to_json,Magic Number,The method contains a magic number: 12,40
ontrack,net.nemerosa.ontrack.model.structure,BranchTest,collection_without_projects,Long Statement,The length of the statement "List<Branch> branches=Arrays.asList(Branch.of(project`new NameDescription("B1"`"Branch 1"))`Branch.of(project`new NameDescription("B2"`"Branch 2")));" is 149.,15
ontrack,net.nemerosa.ontrack.model.structure,BranchTest,collection_without_projects,Long Statement,The length of the statement "assertJsonWrite(array().with(object().with("id"`0).with("name"`"B1").with("description"`"Branch 1").end()).with(object().with("id"`0).with("name"`"B2").with("description"`"Branch 2").end()).end()`branches`List.class);" is 217.,15
ontrack,net.nemerosa.ontrack.model.structure,BranchTest,branch_with_project,Long Statement,The length of the statement "assertJsonWrite(object().with("id"`0).with("name"`"B").with("description"`"Branch").with("project"`object().with("id"`0).with("name"`"PRJ").with("description"`"Project").end()).end()`branch`Branch.class);" is 204.,41
ontrack,net.nemerosa.ontrack.model.form,Form,name,Long Statement,The length of the statement "return with(Text.of("name").label("Name").length(40).regex("[A-Za-z0-9_\\.\\-]+").validation("Name is required and must contain only alpha-numeric characters` underscores` points or dashes."));" is 193.,22
ontrack,net.nemerosa.ontrack.model.form,Form,name,Magic Number,The method contains a magic number: 40,22
ontrack,net.nemerosa.ontrack.model.form,Form,description,Magic Number,The method contains a magic number: 500,32
ontrack,net.nemerosa.ontrack.model.form,Form,description,Magic Number,The method contains a magic number: 3,32
ontrack,net.nemerosa.ontrack.json,ObjectMapperFactory,create,Long Statement,The length of the statement "AnnotationIntrospector pair=AnnotationIntrospector.pair(config.getAnnotationIntrospector()`new ConstructorPropertiesAnnotationIntrospector());" is 142.,17
ontrack,net.nemerosa.ontrack.json,ProxyAnnotation,of,Long Statement,The length of the statement "return (A)Proxy.newProxyInstance(annotationType.getClassLoader()`new Class[]{annotationType}`new AnnotationInvocationHandler<A>(annotationType`properties));" is 156.,11
ontrack,net.nemerosa.ontrack.json,JsonUtils,toObject,Complex Method,Cyclomatic complexity of the method is 9,40
ontrack,net.nemerosa.ontrack.json,JsonUtils,toObject,Missing default,The following switch statement is missing a default case: !org.eclipse.jdt.core.dom.SwitchStatement@62dd8ce7,40
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,toJson,Long Statement,The length of the statement "assertEquals("\"2014-03-20T20:44:00Z\""`ObjectMapperFactory.create().writeValueAsString(LocalDateTime.of(2014`3`20`20`44)));" is 124.,14
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,toJson,Magic Number,The method contains a magic number: 2014,14
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,toJson,Magic Number,The method contains a magic number: 3,14
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,toJson,Magic Number,The method contains a magic number: 20,14
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,toJson,Magic Number,The method contains a magic number: 20,14
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,toJson,Magic Number,The method contains a magic number: 44,14
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,fromJson_with_zone,Long Statement,The length of the statement "assertEquals(LocalDateTime.of(2014`3`20`7`30)`ObjectMapperFactory.create().readValue("\"2014-03-20T07:30:00.000Z\""`LocalDateTime.class));" is 138.,44
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,fromJson_with_zone,Magic Number,The method contains a magic number: 2014,44
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,fromJson_with_zone,Magic Number,The method contains a magic number: 3,44
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,fromJson_with_zone,Magic Number,The method contains a magic number: 20,44
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,fromJson_with_zone,Magic Number,The method contains a magic number: 7,44
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,fromJson_with_zone,Magic Number,The method contains a magic number: 30,44
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,fromJson_without_zone,Long Statement,The length of the statement "assertEquals(LocalDateTime.of(2014`3`20`7`30)`ObjectMapperFactory.create().readValue("\"2014-03-20T07:30:00.000\""`LocalDateTime.class));" is 137.,52
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,fromJson_without_zone,Magic Number,The method contains a magic number: 2014,52
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,fromJson_without_zone,Magic Number,The method contains a magic number: 3,52
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,fromJson_without_zone,Magic Number,The method contains a magic number: 20,52
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,fromJson_without_zone,Magic Number,The method contains a magic number: 7,52
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,fromJson_without_zone,Magic Number,The method contains a magic number: 30,52
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,fromJson_without_millis,Long Statement,The length of the statement "assertEquals(LocalDateTime.of(2014`3`20`7`30)`ObjectMapperFactory.create().readValue("\"2014-03-20T07:30:00\""`LocalDateTime.class));" is 133.,60
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,fromJson_without_millis,Magic Number,The method contains a magic number: 2014,60
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,fromJson_without_millis,Magic Number,The method contains a magic number: 3,60
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,fromJson_without_millis,Magic Number,The method contains a magic number: 20,60
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,fromJson_without_millis,Magic Number,The method contains a magic number: 7,60
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,fromJson_without_millis,Magic Number,The method contains a magic number: 30,60
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,fromJson_without_seconds,Long Statement,The length of the statement "assertEquals(LocalDateTime.of(2014`3`20`7`30)`ObjectMapperFactory.create().readValue("\"2014-03-20T07:30\""`LocalDateTime.class));" is 130.,68
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,fromJson_without_seconds,Magic Number,The method contains a magic number: 2014,68
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,fromJson_without_seconds,Magic Number,The method contains a magic number: 3,68
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,fromJson_without_seconds,Magic Number,The method contains a magic number: 20,68
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,fromJson_without_seconds,Magic Number,The method contains a magic number: 7,68
ontrack,net.nemerosa.ontrack.json,JDKLocalDateTimeSerializerTest,fromJson_without_seconds,Magic Number,The method contains a magic number: 30,68
ontrack,net.nemerosa.ontrack.json,JDKLocalTimeSerializerTest,toJson,Magic Number,The method contains a magic number: 20,14
ontrack,net.nemerosa.ontrack.json,JDKLocalTimeSerializerTest,toJson,Magic Number,The method contains a magic number: 44,14
ontrack,net.nemerosa.ontrack.json,JDKLocalTimeSerializerTest,fromJson,Magic Number,The method contains a magic number: 7,30
ontrack,net.nemerosa.ontrack.json,JDKLocalTimeSerializerTest,fromJson,Magic Number,The method contains a magic number: 30,30
